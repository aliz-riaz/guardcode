"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var n="undefined"==typeof window,o=function(e){if(!n&&window.Intercom){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return window.Intercom.apply(null,[e].concat(o))}},a=e.createContext(void 0),r=function(e){return t({company_id:e.companyId,name:e.name,created_at:e.createdAt,plan:e.plan,monthly_spend:e.monthlySpend,user_count:e.userCount,size:e.size,website:e.website,industry:e.industry},e.customAttributes)},i=function(e){return{type:e.type,image_url:e.imageUrl}},u=function(e){return function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"==typeof t[n]?e(t[n]):void 0===t[n]&&delete t[n]})),t}(t({},{custom_launcher_selector:(n=e).customLauncherSelector,alignment:n.alignment,vertical_padding:n.verticalPadding,horizontal_padding:n.horizontalPadding,hide_default_launcher:n.hideDefaultLauncher,session_duration:n.sessionDuration,action_color:n.actionColor,background_color:n.backgroundColor},function(e){var n;return t({email:e.email,user_id:e.userId,created_at:e.createdAt,name:e.name,phone:e.phone,last_request_at:e.lastRequestAt,unsubscribed_from_emails:e.unsubscribedFromEmails,language_override:e.languageOverride,utm_campaign:e.utmCampaign,utm_content:e.utmContent,utm_medium:e.utmMedium,utm_source:e.utmSource,utm_term:e.utmTerm,avatar:e.avatar&&i(e.avatar),user_hash:e.userHash,company:e.company&&r(e.company),companies:null==(n=e.companies)?void 0:n.map(r)},e.customAttributes)}(e)));var n};exports.IntercomProvider=function(r){var i=r.appId,c=r.autoBoot,s=void 0!==c&&c,l=r.autoBootProps,d=r.children,m=r.onHide,f=r.onShow,p=r.onUnreadCountChange,h=r.shouldInitialize,w=void 0===h?!n:h,v=r.apiBase,g=r.initializeDelay,b=(function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t.indexOf(n=r[o])>=0||(a[n]=e[n])}(r,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","shouldInitialize","apiBase","initializeDelay"]),e.useRef(!1)),_=e.useRef(!1),C=e.useCallback((function(e){if((window.Intercom||w)&&!b.current){var n=t({app_id:i},v&&{api_base:v},e&&u(e));window.intercomSettings=n,o("boot",n),b.current=!0}}),[v,i,w]),y=e.useState(!1),k=y[0],I=y[1],S=e.useCallback((function(){I(!1),m&&m()}),[m,I]),E=e.useCallback((function(){I(!0),f&&f()}),[f,I]);n||!w||_.current||(function(e,t){void 0===t&&(t=0);var n=window,o=n.Intercom;if("function"==typeof o)o("reattach_activator"),o("update",n.intercomSettings);else{var a=document,r=function e(){e.c(arguments)};r.q=[],r.c=function(e){r.q.push(e)},n.Intercom=r;var i=function(){setTimeout((function(){var t=a.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+e;var n=a.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}),t)};"complete"===document.readyState?i():n.attachEvent?n.attachEvent("onload",i):n.addEventListener("load",i,!1)}}(i,g),o("onHide",S),o("onShow",E),p&&o("onUnreadCountChange",p),s&&C(l),_.current=!0);var M=e.useCallback((function(e,t){if((window.Intercom||w)&&b.current)return t()}),[w]),A=e.useCallback((function(){b.current&&(o("shutdown"),delete window.intercomSettings,b.current=!1)}),[]),O=e.useCallback((function(){b.current&&(o("shutdown"),delete window.Intercom,delete window.intercomSettings,b.current=!1)}),[]),z=e.useCallback((function(){M("update",(function(){var e=(new Date).getTime();o("update",{last_requested_at:e})}))}),[M]),B=e.useCallback((function(e){M("update",(function(){if(e){var n=u(e);window.intercomSettings=t({},window.intercomSettings,n),o("update",n)}else z()}))}),[M,z]),P=e.useCallback((function(){M("hide",(function(){o("hide")}))}),[M]),j=e.useCallback((function(){M("show",(function(){return o("show")}))}),[M]),x=e.useCallback((function(){M("showMessages",(function(){o("showMessages")}))}),[M]),T=e.useCallback((function(e){M("showNewMessage",(function(){e?o("showNewMessage",e):o("showNewMessage")}))}),[M]),q=e.useCallback((function(){return M("getVisitorId",(function(){return o("getVisitorId")}))}),[M]),N=e.useCallback((function(e){M("startTour",(function(){o("startTour",e)}))}),[M]),D=e.useCallback((function(e,t){M("trackEvent",(function(){t?o("trackEvent",e,t):o("trackEvent",e)}))}),[M]),H=e.useCallback((function(e){return M("showArticle",(function(){o("showArticle",e)}))}),[M]),U=e.useMemo((function(){return{boot:C,shutdown:A,hardShutdown:O,update:B,hide:P,show:j,isOpen:k,showMessages:x,showNewMessages:T,getVisitorId:q,startTour:N,trackEvent:D,showArticle:H}}),[C,A,O,B,P,j,k,x,T,q,N,D,H]);return e.createElement(a.Provider,{value:U},d)},exports.useIntercom=function(){return e.useContext(a)};
//# sourceMappingURL=react-use-intercom.cjs.production.min.js.map
